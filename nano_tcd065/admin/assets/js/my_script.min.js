!function(n){if(n(".c-color-picker").wpColorPicker(),n(".cf-color-picker").wpColorPicker(),n(".sortable").sortable({placeholder:"sortable-placeholder",helper:"clone",forceHelperSize:!0,forcePlaceholderSize:!0}),n(".repeater-wrapper").each(function(){var r=n(this).find(".repeater-item").last().index();n(this).find(".button-add-row").click(function(e){e.preventDefault();var o=n(this).attr("data-clone"),t=n(this).closest(".repeater-wrapper");o&&t.length&&(r++,t.find(".repeater").append(o.replace(/addindex/g,r))),n(".cf-color-picker").wpColorPicker()})}).on("click",".button-delete-row",function(e){e.preventDefault();var o=!0,t=n(this).closest(".repeater-wrapper").attr("data-delete-confirm");t.length&&(o=confirm(t)),o&&n(this).closest(".repeater-item").remove()}),document.getElementById("my_theme_option")){n("#my_theme_option").cookieTab({tabMenuElm:"#theme_tab",tabPanelElm:"#tab-panel"});for(var e=document.getElementsByClassName("theme_option_field"),o=0,t=e.length;o<t;o++)e[o].addEventListener("click",function(e){if(e.target)if(e.target.classList.contains("theme_option_subbox_headline"))e.target.parentNode.classList.toggle("active");else if("INPUT"===e.target.nodeName&&"radio"===e.target.type){var o=e.target.name.match(/dp_options\[(\w+)\]/)[1],t=e.target.value,r=document.querySelectorAll('[id^="'+o+'"], [class^="'+o+'"]');"contents_builder"!==o&&r.length&&(r.forEach(function(e){e.style.display="none"}),document.getElementById(o+"_"+t)&&(document.getElementById(o+"_"+t).style.display="block"),document.querySelectorAll("."+o+"_"+t).forEach(function(e){e.style.display="block"}))}});n(".theme_option_field").on("change keyup",".change_subbox_headline",function(e){n(this).closest(".sub_box").find(".theme_option_subbox_headline").text(n(this).val())}),n(".repeater-wrapper").on("change",".footer-bar-type select",function(e){var o=n(this).parents(".sub_box"),t=o.find(".footer-bar-target"),r=o.find(".footer-bar-url"),a=o.find(".footer-bar-number");switch(e.target.value){case"type1":t.show(),r.show(),a.hide();break;case"type2":t.hide(),r.hide(),a.hide();break;case"type3":t.hide(),r.hide(),a.show()}}),n("#tab-panel").on("click",".ajax_button",function(){var e=n(".button-ml");return n("#saving_data").show(),tinyMCE.triggerSave(),n("#myOptionsForm").ajaxSubmit({beforeSend:function(){e.attr("disabled",!0)},complete:function(){e.attr("disabled",!1)},success:function(){n("#saving_data").hide(),n("#saved_data").html('<div id="saveMessage" class="successModal"></div>'),n("#saveMessage").append("<p>"+error_messages.success+"</p>").show()},error:function(){n("#saving_data").hide(),alert(error_messages.error)},timeout:1e4}),setTimeout(function(){n("#saveMessage").hide()},3e3),!1})}if(n("[data-logo-width-input]").length){var g=[];n("[data-logo-width-input]").each(function(e){g[e]={};var o=g[e];o.$preview=n(this),o.$logo=n('<div class="slider_logo_preview-logo">'),o.$logoWidth=n(n(this).attr("data-logo-width-input")),o.$logoImg=n(n(this).attr("data-logo-img")),o.logoImgSrc=null,o.logoImgSrcFirst=null,o.$bgImg=null,o.$Overlay=n('<div class="slider_logo_preview-overlay"></div>'),o.$overlayColor=n(n(this).attr("data-overlay-color")),o.$overlayOpacity=n(n(this).attr("data-overlay-opacity")),o.$preview.html("").append(o.$logo).append(o.$Overlay),o.$preview.closest(".slider_logo_preview-wrapper").hide(),o.$logoImg&&o.$logoImg.length&&(o.logoImgSrcFirst=o.$logoImg.attr("src")),o.$logo.on("dblclick",function(){o.$logoWidth.val(0),o.$logo.width(o.$logo.attr("data-origin-width"))})});var r=function(){for(var e=0;e<g.length;e++){var o=g[e],t=!1;if(o.$logoImg=n(o.$preview.attr("data-logo-img")),o.$bgImg=null,o.$logoImg.length&&o.logoImgSrc!==o.$logoImg.attr("src")&&(o.$logoImg.prop("complete")||o.$logoImg.prop("readyState")||"complete"===o.$logoImg.prop("readyState"))){t=!0,o.logoImgSrc=o.$logoImg.attr("src");var r=new Image;if(r.src=o.logoImgSrc,o.$logo.hasClass("ui-resizable")&&o.$logo.resizable("destroy"),o.$logo.find("img").remove(),o.$logo.html('<img src="'+o.logoImgSrc+'" alt="" />').attr("data-origin-width",r.width).append('<div class="slider_logo_preview-logo-border-e"></div><div class="slider_logo_preview-logo-border-n"></div><div class="slider_logo_preview-logo-border-s"></div><div class="slider_logo_preview-logo-border-w"></div></div>'),o.logoImgSrcFirst){var a=parseInt(o.$logoWidth.val(),10);o.logoImgSrcFirst=null,0<a?o.$logo.width(a):o.$logo.width(r.width)}else o.$logoWidth.val(0),o.$logo.width(r.width);o.$logo.resizable({aspectRatio:!0,distance:5,handles:"all",maxWidth:1180,stop:function(e,o){n(n(this).closest("[data-logo-width-input]").attr("data-logo-width-input")).val(parseInt(o.size.width,10))}})}o.$Overlay.removeAttr("style");var l=o.$overlayColor.val()||"",i=parseFloat(o.$overlayOpacity.val()||0);if(l&&0<i){var s=[];6<=(l=l.replace("#","")).length?(s.push(parseInt(l.substring(0,2),16)),s.push(parseInt(l.substring(2,4),16)),s.push(parseInt(l.substring(4,6),16)),s.push(i),o.$Overlay.css("background-color","rgba("+s.join(",")+")")):3<=l.length&&(s.push(parseInt(l.substring(0,1)+l.substring(0,1),16)),s.push(parseInt(l.substring(1,2)+l.substring(1,2),16)),s.push(parseInt(l.substring(2,3)+l.substring(2,3),16)),s.push(i),o.$Overlay.css("background-color","rgba("+s.join(",")+")"))}t&&(o.logoImgSrc?o.$preview.closest(".slider_logo_preview-wrapper").show():o.$preview.closest(".slider_logo_preview-wrapper").hide())}};setInterval(r,500),n(".cfmf-delete-img").on("click.logoPreviewChange",function(){setTimeout(r,30)})}}(jQuery);